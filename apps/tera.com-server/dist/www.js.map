{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./app.ts","webpack:///./bin/env.ts","webpack:///./bin/www.ts","webpack:///./routes/api/index.ts","webpack:///./routes/api/v1/activity/index.ts","webpack:///./routes/api/v1/index.ts","webpack:///./routes/api/v1/secure/index.ts","webpack:///./routes/api/v1/users/index.ts","webpack:///./routes/auth/index.ts","webpack:///./routes/index.ts","webpack:///external \"auth-node\"","webpack:///external \"body-parser\"","webpack:///external \"compression\"","webpack:///external \"cookie-parser\"","webpack:///external \"cors\"","webpack:///external \"dotenv\"","webpack:///external \"express\"","webpack:///external \"express-conditional-middleware\"","webpack:///external \"express-session\"","webpack:///external \"express-zone\"","webpack:///external \"helmet\"","webpack:///external \"http\"","webpack:///external \"lodash\"","webpack:///external \"method-override\"","webpack:///external \"passport\"","webpack:///external \"path\"","webpack:///external \"randomstring\""],"names":[],"mappings":"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","file":"www.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./bin/www.ts\");\n","import { json, urlencoded } from 'body-parser';\r\nimport compression from 'compression';\r\nimport cookieParser from 'cookie-parser';\r\nimport express from 'express';\r\nimport expressSession from 'express-session';\r\nimport helmet from 'helmet';\r\nimport methodOverride from 'method-override';\r\nimport path from 'path';\r\n\r\nimport { clientErrorHandler, errorHandler } from 'express-zone';\r\nimport { routes } from './routes';\r\nimport { facebookStrategy, googleStrategy, linkedinStrategy, twitterStrategy } from 'auth-node';\r\n\r\nimport passport from 'passport';\r\n\r\npassport.use(facebookStrategy);\r\npassport.use(twitterStrategy);\r\npassport.use(linkedinStrategy);\r\npassport.use(googleStrategy);\r\n\r\nconst app = express();\r\n\r\napp.use(json());\r\napp.use(urlencoded({ extended: true }));\r\n\r\napp.use(cookieParser());\r\napp.use(compression());\r\napp.use(methodOverride());\r\n\r\napp.use(helmet());\r\n\r\napp.use(expressSession({ secret: 'SECRET' }));\r\napp.use(passport.initialize());\r\napp.use(passport.session());\r\n\r\napp.use(routes);\r\n\r\napp.use(express.static(path.resolve(__dirname, './public')));\r\n\r\napp.get('*', (req, res) => {\r\n  res.sendFile(path.resolve(__dirname, './public/index.html'));\r\n});\r\n\r\napp.use(clientErrorHandler);\r\napp.use(errorHandler);\r\n\r\nexport default app;\r\n","import { logger } from 'express-zone';\r\nimport dotenv from 'dotenv';\r\n\r\nprocess.on('uncaughtException', (error: any) => {\r\n  console.error({ error });\r\n\r\n  try {\r\n    const { correlationId } = logger.log('error', 'Uncaught Exception %s', error);\r\n\r\n    console.error('[uncaughtException correlationId]: ', correlationId);\r\n\r\n    if (!isTrustedError(error)) {\r\n      process.nextTick(() => process.exit());\r\n    }\r\n  } catch (e) {\r\n    console.log(`*** \\n[uncaughtException catch e] ${e}\\n[uncaughtException error] ${error} \\n ***`);\r\n    process.nextTick(() => process.exit(1));\r\n  }\r\n});\r\n\r\nlet path = '.env';\r\n\r\nif (process.env.DEBUG_ENV && process.env.DEBUG_ENV.length > 0 && process.env.DEBUG_ENV.toLocaleLowerCase() !== 'development') {\r\n  path = `.${process.env.DEBUG_ENV}.env`;\r\n}\r\n\r\ndotenv.config({ path });\r\n\r\nfunction isTrustedError(error) {\r\n  return error.isOperational;\r\n}\r\n","import './env';\r\n\r\nimport { db } from 'auth-node';\r\nimport { logger } from 'express-zone';\r\nimport http from 'http';\r\n\r\nimport app from '../app';\r\n\r\nconst PORT = process.env.PORT || 3000;\r\n\r\nasync function createServer() {\r\n  db.connection.once('open', async () => {\r\n    logger.log('Connection database has been established successfully.');\r\n\r\n    // await db.connection.db.dropDatabase();\r\n\r\n    const server = http.createServer(app);\r\n\r\n    server.listen(PORT, () => {\r\n      logger.log(`app listening on port ${PORT}!`);\r\n    });\r\n  });\r\n\r\n  await db.connect();\r\n}\r\n\r\ncreateServer();\r\n","import { Router } from 'express';\r\nimport { v1 } from './v1';\r\n\r\nconst router = Router();\r\n\r\nrouter.all('/', (req, res) => {\r\n  console.log('in /api');\r\n  res.json({ ok: true });\r\n});\r\n\r\nrouter.use('/v1', v1);\r\n\r\nexport { router as api };\r\n","import { Router } from 'express';\r\n\r\nimport { authenticate } from 'auth-node';\r\n\r\n// import { activitiesMetadata } from '@libs/tera-activities';\r\n\r\nconst router = Router();\r\n\r\nrouter.get('/', (req, res, next) => {\r\n  // console.log('activitiesMetadata', activitiesMetadata);\r\n  // res.json(activitiesMetadata['single-photo']);\r\n});\r\n\r\nexport { router as activity };\r\n","import { Router } from 'express';\r\nimport { activity } from './activity';\r\nimport { secure } from './secure';\r\nimport { users } from './users';\r\n\r\nconst router = Router();\r\n\r\nrouter.use('/users', users);\r\nrouter.use('/activity', activity);\r\nrouter.use('/secure', secure);\r\n\r\nexport { router as v1 };\r\n","import { Router } from 'express';\r\n\r\nimport { authenticate } from 'auth-node';\r\n\r\nconst router = Router();\r\n\r\nrouter.all('/', authenticate, (req, res, next) => {\r\n  const { user } = req as any;\r\n\r\n  res.json({ msg: 'this is secure data', user: user.toJSON() });\r\n});\r\n\r\nexport { router as secure };\r\n","import { Router } from 'express';\r\n\r\nimport {\r\n  changePassword,\r\n  disconnectFromSocial,\r\n  login,\r\n  recoverAccount,\r\n  refreshToken,\r\n  register,\r\n  sendVerifyNotification,\r\n  verifyAccount,\r\n  verifyPassword\r\n} from 'auth-node';\r\n\r\nconst router = Router();\r\n\r\nrouter.post('/', register, (req, res, next) => {\r\n  const { user } = req as any;\r\n\r\n  res.json(user.toJSON());\r\n});\r\n\r\nrouter.post('/login', login, (req, res, next) => {\r\n  const { user } = req as any;\r\n\r\n  res.json(user.toJSON());\r\n});\r\n\r\nrouter.post('/verify', verifyAccount, (req, res, next) => {\r\n  const { user } = req as any;\r\n\r\n  res.json(user.toJSON());\r\n});\r\n\r\nrouter.post('/notify-verify', sendVerifyNotification, (req, res, next) => {\r\n  res.sendStatus(200);\r\n});\r\n\r\nrouter.post('/recover-account', recoverAccount, (req, res, next) => {\r\n  res.sendStatus(200);\r\n});\r\n\r\nrouter.post('/verify-password', verifyPassword, (req, res, next) => {\r\n  const { user } = req as any;\r\n\r\n  res.json(user.toJSON());\r\n});\r\n\r\nrouter.post('/password', changePassword, (req, res, next) => {\r\n  const { user } = req as any;\r\n\r\n  res.json(user.toJSON());\r\n});\r\n\r\nrouter.post('/refresh', refreshToken, (req, res, next) => {\r\n  const { user } = req as any;\r\n\r\n  res.json(user.toJSON());\r\n});\r\n\r\nrouter.post('/social', disconnectFromSocial, (req, res, next) => {\r\n  const { user } = req as any;\r\n\r\n  res.json(user.toJSON());\r\n});\r\n\r\nrouter.get('/auth/:social', (req, res, next) => {\r\n  console.log('in auth');\r\n\r\n  res.json({ auth: true });\r\n});\r\n\r\nrouter.get('/auth/:social/return', (req, res, next) => {\r\n  console.log('in auth return');\r\n\r\n  res.json({ auth: true });\r\n});\r\n\r\nexport { router as users };\r\n","import { Router } from 'express';\r\n\r\nimport { authenticate } from 'passport';\r\n\r\nimport expressConditionalMiddleware from 'express-conditional-middleware';\r\nimport * as randomstring from 'randomstring';\r\n\r\nimport { authenticateUser, createUser, sendWelcomeEmail, token, updateUserFromSocial, User } from 'auth-node';\r\n\r\nimport { asyncAll } from 'express-zone';\r\nimport { get } from 'lodash';\r\n\r\nconst registerWithSocial = combineMiddleware([\r\n  ...asyncAll([\r\n    createUser(req => req.body),\r\n    sendWelcomeEmail({ getUser: req => req.user }),\r\n    updateUserFromSocial({\r\n      getUser: req => req.user,\r\n      getSocialResponse: req => req.social\r\n    }),\r\n    token()\r\n  ])\r\n]);\r\n\r\nconst loginWithSocial = combineMiddleware([\r\n  ...asyncAll([\r\n    authenticateUser(req => req.body),\r\n    updateUserFromSocial({\r\n      getUser: req => req.user,\r\n      getSocialResponse: req => req.social\r\n    }),\r\n    token()\r\n  ])\r\n]);\r\n\r\nconst router = Router();\r\n\r\nconst options = {\r\n  facebook: { session: false, scope: ['email'], authType: 'rerequest' }\r\n};\r\n\r\nrouter.get('/:social', (req, res, next) => authenticate(req.params.social, options[req.params.social])(req, res, next));\r\n\r\nrouter.get(\r\n  '/:social/callback',\r\n  (req, res, next) =>\r\n    authenticate(req.params.social, async (err, strategyResponse) => {\r\n      console.log('in here');\r\n\r\n      console.log({ err, strategyResponse });\r\n\r\n      (req as any).social = strategyResponse;\r\n\r\n      const email = get(req, 'social.profile.emails[0].value');\r\n      const name = get(req, 'social.profile.displayName');\r\n      const password = randomstring.generate(8);\r\n\r\n      if (!email) {\r\n        res.end('SOCIAL_EMAIL_MISSING');\r\n        return;\r\n      }\r\n\r\n      const user = await User.findOne({ email });\r\n\r\n      req.body = user ? { password: user.password, email: user.email } : { email, name, password };\r\n\r\n      (req as any).userExist = !!user;\r\n\r\n      next();\r\n    })(req, res, next),\r\n  expressConditionalMiddleware((req, res, next) => !req.userExist, registerWithSocial, loginWithSocial),\r\n  (req, res, next) => {\r\n    console.log('after all');\r\n\r\n    const { user } = req as any;\r\n\r\n    res.json(user.toJSON());\r\n  }\r\n);\r\n\r\nfunction combineMiddleware(mids) {\r\n  return mids.reduce((a, b) => {\r\n    return (req, res, next) => {\r\n      a(req, res, (err: any) => {\r\n        if (err) {\r\n          return next(err);\r\n        }\r\n        b(req, res, next);\r\n      });\r\n    };\r\n  });\r\n}\r\n\r\nrouter.get('/twitter', (req, res, next) => {\r\n  authenticate('twitter')(req, res, next);\r\n});\r\n\r\nrouter.get('/twitter/return', (req, res, next) => {\r\n  authenticate('twitter', (err, strategyResponse) => {\r\n    if (err) {\r\n      throw err;\r\n    }\r\n\r\n    const { accessToken, refreshToken, payload } = strategyResponse;\r\n\r\n    res.writeHead(200, { 'Content-Type': 'text/html' });\r\n\r\n    const message = {\r\n      accessToken,\r\n      payload,\r\n      refreshToken,\r\n      message: 'twitterLogin'\r\n    };\r\n\r\n    res.write(`\r\n    <script>\r\n       window.opener.postMessage(${JSON.stringify(message)}, \"*\");\r\n       window.close();\r\n    </script>`);\r\n\r\n    res.end();\r\n  })(req, res, next);\r\n});\r\n\r\nrouter.get('/linkedin', (req, res, next) => {\r\n  authenticate('linkedin', { scope: ['r_basicprofile', 'r_emailaddress'] })(req, res, next);\r\n});\r\n\r\nrouter.get('/linkedin/return', (req, res, next) => {\r\n  authenticate('linkedin', (err, strategyResponse) => {\r\n    if (err) {\r\n      throw err;\r\n    }\r\n\r\n    const { accessToken, refreshToken, payload } = strategyResponse;\r\n\r\n    res.writeHead(200, { 'Content-Type': 'text/html' });\r\n\r\n    const message = {\r\n      payload,\r\n      accessToken,\r\n      refreshToken,\r\n      message: 'linkedinLogin'\r\n    };\r\n\r\n    res.write(`\r\n    <script>\r\n       window.opener.postMessage(${JSON.stringify(message)}, \"*\");\r\n       window.close();\r\n    </script>`);\r\n\r\n    res.end();\r\n  })(req, res, next);\r\n});\r\n\r\nrouter.get('/google', (req, res, next) => {\r\n  authenticate('google', { scope: ['profile', 'email'] })(req, res, next);\r\n});\r\n\r\nrouter.get('/google/return', (req, res, next) => {\r\n  authenticate('google', (err, strategyResponse) => {\r\n    if (err) {\r\n      throw err;\r\n    }\r\n\r\n    const { accessToken, refreshToken, payload } = strategyResponse;\r\n\r\n    res.writeHead(200, { 'Content-Type': 'text/html' });\r\n\r\n    const message = {\r\n      payload,\r\n      accessToken,\r\n      refreshToken,\r\n      message: 'googleLogin'\r\n    };\r\n\r\n    res.write(`\r\n    <script>\r\n       window.opener.postMessage(${JSON.stringify(message)}, \"*\");\r\n       window.close();\r\n    </script>`);\r\n\r\n    res.end();\r\n  })(req, res, next);\r\n});\r\n\r\nexport { router as auth };\r\n\r\nexport function testA(getAttributes) {\r\n  return async (req, res, next) => {\r\n    console.log('in test a');\r\n    next();\r\n  };\r\n}\r\n\r\nexport function testB(getAttributes) {\r\n  return async (req, res, next) => {\r\n    console.log('in test B');\r\n    next();\r\n  };\r\n}\r\n","import cors from 'cors';\r\nimport { Router } from 'express';\r\nimport { api } from './api';\r\nimport { auth } from './auth';\r\n\r\nconst router = Router();\r\n\r\nrouter.use('/api', cors(), api);\r\n\r\nrouter.use('/auth', auth);\r\n\r\nexport { router as routes };\r\n","module.exports = require(\"auth-node\");","module.exports = require(\"body-parser\");","module.exports = require(\"compression\");","module.exports = require(\"cookie-parser\");","module.exports = require(\"cors\");","module.exports = require(\"dotenv\");","module.exports = require(\"express\");","module.exports = require(\"express-conditional-middleware\");","module.exports = require(\"express-session\");","module.exports = require(\"express-zone\");","module.exports = require(\"helmet\");","module.exports = require(\"http\");","module.exports = require(\"lodash\");","module.exports = require(\"method-override\");","module.exports = require(\"passport\");","module.exports = require(\"path\");","module.exports = require(\"randomstring\");"],"sourceRoot":""}